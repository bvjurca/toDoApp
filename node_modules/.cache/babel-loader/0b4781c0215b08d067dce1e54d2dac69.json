{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  key: 0\n};\n\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\"Home\");\n\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\" | \");\n\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\"Sign out\");\n\nexport function render(_ctx, _cache) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n\n  const _component_router_view = _resolveComponent(\"router-view\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_ctx.user !== null ? (_openBlock(), _createElementBlock(\"nav\", _hoisted_1, [_createVNode(_component_router_link, {\n    to: \"/\"\n  }, {\n    default: _withCtx(() => [_hoisted_2]),\n    _: 1\n    /* STABLE */\n\n  }), _hoisted_3, _createVNode(_component_router_link, {\n    onClick: _withModifiers(_ctx.handleSignOut, [\"prevent\"]),\n    to: \"/auth\"\n  }, {\n    default: _withCtx(() => [_hoisted_4]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"onClick\"])])) : _createCommentVNode(\"v-if\", true), _createVNode(_component_router_view)], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":";;;;;iDAEwB;;iDAAkB;;iDACmB;;;;;;;6DAFhDA,cAAI,sBAAfC,oBAGM,KAHN,EAGMC,UAHN,EAGM,CAFJC,aAAsCC,sBAAtC,EAAsC;IAAzBC,EAAE,EAAC;EAAsB,CAAtC,EAAmB;sBAAC,MAAI,aAAL;;;;EAAA,CAAnB,CAEI,cADJF,aAA+EC,sBAA/E,EAA+E;IAAjEE,OAAK,iBAAYN,kBAAZ,EAAyB,WAAzB,CAA4D;IAAjCK,EAAE,EAAC;EAA8B,CAA/E;sBAAyD,MAAQ;;;;GAAjE;;EAAA,cACI,CAHN,wCAIAF,aAAcI,sBAAd","names":["_ctx","_createElementBlock","_hoisted_1","_createVNode","_component_router_link","to","onClick","_component_router_view"],"sourceRoot":"","sources":["/Users/bogdia/IronHack/toDoApp/final-project/src/App.vue"],"sourcesContent":["<template>\n  <nav v-if=\"user !== null\">\n    <router-link to=\"/\">Home</router-link> |\n    <router-link @click.prevent = \"handleSignOut\" to=\"/auth\">Sign out</router-link>\n  </nav>\n  <router-view/>\n</template>\n\n<script>\n\nimport userStore from '@/store/user';\nimport { mapActions, mapState } from 'pinia';\n\nexport default {\n  name: 'App',\n  computed: {\n    ...mapState(userStore, ['user']),\n  },\n  methods: {\n    ...mapActions(userStore, ['fetchUser', 'signOut']),\n    handleSignOut() {\n      this.signOut();\n      if (this.user===null) {\n        this.$router.push('/auth');\n      } \n      }\n    },\n  },\n  async created() {\n    try {\n      await this.fetchUser(); // here we call fetch user\n      if (!this.user) {\n      // redirect them to logout if the user is not there\n        this.$router.push({ path: '/auth' });\n      } else {\n      // continue to dashboard\n        this.$router.push({ path: '/' });\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  },\n};\n\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n}\n\nnav {\n  padding: 30px;\n}\n\nnav a {\n  font-weight: bold;\n  color: #2c3e50;\n}\n\nnav a.router-link-exact-active {\n  color: #42b983;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}