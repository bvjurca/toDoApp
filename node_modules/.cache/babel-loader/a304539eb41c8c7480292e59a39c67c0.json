{"ast":null,"code":"import _regeneratorRuntime from \"/Users/bogdia/IronHack/toDoApp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/bogdia/IronHack/toDoApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n// /store/user.js\nimport { defineStore } from \"pinia\";\nimport supabase from \"../supabase\";\nexport default defineStore(\"user\", {\n  state: function state() {\n    return {\n      user: null\n    };\n  },\n  actions: {\n    fetchUser: function fetchUser() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var user;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return supabase.auth.user();\n\n              case 2:\n                user = _context.sent;\n                _this.user = user;\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    signUp: function signUp(email, password) {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var _yield$supabase$auth$, user, error;\n\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return supabase.auth.signUp({\n                  email: email,\n                  password: password\n                });\n\n              case 2:\n                _yield$supabase$auth$ = _context2.sent;\n                user = _yield$supabase$auth$.user;\n                error = _yield$supabase$auth$.error;\n\n                if (!error) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                throw error;\n\n              case 7:\n                if (user) _this2.user = user;\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    signIn: function signIn(email, password) {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var _yield$supabase$auth$2, user, error;\n\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return supabase.auth.signIn({\n                  email: email,\n                  password: password\n                });\n\n              case 2:\n                _yield$supabase$auth$2 = _context3.sent;\n                user = _yield$supabase$auth$2.user;\n                error = _yield$supabase$auth$2.error;\n\n                if (!error) {\n                  _context3.next = 7;\n                  break;\n                }\n\n                throw error;\n\n              case 7:\n                if (user) _this3.user = user;\n\n              case 8:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))();\n    },\n    signOut: function signOut() {\n      var _this4 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var _yield$supabase$auth$3, error;\n\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return supabase.auth.signOut();\n\n              case 2:\n                _yield$supabase$auth$3 = _context4.sent;\n                error = _yield$supabase$auth$3.error;\n\n                if (!error) {\n                  _context4.next = 8;\n                  break;\n                }\n\n                throw error;\n\n              case 8:\n                _this4.user = null;\n\n              case 9:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }))();\n    },\n    passwordReset: function passwordReset() {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n        var email, _yield$supabase$auth$4, error;\n\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                email = prompt(\"Please enter your email:\");\n\n                if (email) {\n                  _context5.next = 5;\n                  break;\n                }\n\n                window.alert(\"Email address is required.\");\n                _context5.next = 10;\n                break;\n\n              case 5:\n                _context5.next = 7;\n                return supabase.auth.api.resetPasswordForEmail(email);\n\n              case 7:\n                _yield$supabase$auth$4 = _context5.sent;\n                error = _yield$supabase$auth$4.error;\n\n                if (error) {\n                  alert(\"Error: \" + error.message);\n                } else {\n                  alert(\"Password recovery email has been sent.\");\n                }\n\n              case 10:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }))();\n    }\n  },\n  persist: {\n    enabled: true,\n    strategies: [{\n      key: \"user\",\n      storage: localStorage\n    }]\n  }\n});","map":{"version":3,"names":["defineStore","supabase","state","user","actions","fetchUser","auth","signUp","email","password","error","signIn","signOut","passwordReset","prompt","window","alert","api","resetPasswordForEmail","message","persist","enabled","strategies","key","storage","localStorage"],"sources":["/Users/bogdia/IronHack/toDoApp/src/store/user.js"],"sourcesContent":["// /store/user.js\n\nimport { defineStore } from \"pinia\";\nimport supabase from \"../supabase\";\n\nexport default defineStore(\"user\", {\n  state: () => ({\n    user: null,\n  }),\n\n  actions: {\n    async fetchUser() {\n      const user = await supabase.auth.user();\n      this.user = user;\n    },\n    async signUp(email, password) {\n      const { user, error } = await supabase.auth.signUp({\n        email,\n        password,\n      });\n      if (error) throw error;\n      if (user) this.user = user;\n    },\n    async signIn(email, password) {\n      const { user, error } = await supabase.auth.signIn({\n        email,\n        password,\n      });\n      if (error) throw error;\n      if (user) this.user = user;\n    },\n    async signOut() {\n      const { error } = await supabase.auth.signOut();\n      if (error) throw error;\n      else this.user = null;\n    },\n\n    async passwordReset() {\n      const email = prompt(\"Please enter your email:\");\n      if (!email) {\n        window.alert(\"Email address is required.\");\n      } else {\n        const { error } = await supabase.auth.api.resetPasswordForEmail(email);\n        if (error) {\n          alert(\"Error: \" + error.message);\n        } else {\n          alert(\"Password recovery email has been sent.\");\n        }\n      }\n    },\n  },\n  persist: {\n    enabled: true,\n    strategies: [\n      {\n        key: \"user\",\n        storage: localStorage,\n      },\n    ],\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}