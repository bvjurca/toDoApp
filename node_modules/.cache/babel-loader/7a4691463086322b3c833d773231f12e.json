{"ast":null,"code":"import _regeneratorRuntime from \"/Users/bogdia/IronHack/toDoApp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/bogdia/IronHack/toDoApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.match.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport { defineStore } from 'pinia';\nimport supabase from '../supabase/index';\nexport default defineStore('tasks', {\n  state: function state() {\n    return {\n      tasks: []\n    };\n  },\n  actions: {\n    addTask: function addTask(task) {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var _yield$supabase$from$, data, error;\n\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return supabase.from('tasks').insert(task);\n\n              case 2:\n                _yield$supabase$from$ = _context.sent;\n                data = _yield$supabase$from$.data;\n                error = _yield$supabase$from$.error;\n\n                if (!error) {\n                  _context.next = 7;\n                  break;\n                }\n\n                throw error;\n\n              case 7:\n                if (data) {\n                  _this.tasks.push(data);\n                }\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    editTask: function editTask(taskId) {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var _yield$supabase$from$2, error, data, currentTask;\n\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return supabase.from('tasks').update({\n                  name: ' '\n                }).match({\n                  name: ' '\n                });\n\n              case 2:\n                _yield$supabase$from$2 = _context2.sent;\n                error = _yield$supabase$from$2.error;\n                data = _yield$supabase$from$2.data;\n\n                if (!error) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                throw error;\n\n              case 7:\n                if (data) {\n                  console.log(data);\n                  currentTask = _this2.tasks.filter(function (task) {\n                    return task.id === taskId;\n                  });\n                  currentTask.title = data;\n                }\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    fetchTasks: function fetchTasks() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var _yield$supabase$from$3, tasks;\n\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return supabase.from('tasks').select('*').order('id', {\n                  ascending: false\n                });\n\n              case 2:\n                _yield$supabase$from$3 = _context3.sent;\n                tasks = _yield$supabase$from$3.data;\n                // this.tasks = tasks;\n                _this3.tasks = tasks.map(function (task) {\n                  return {};\n                });\n\n              case 5:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))();\n    }\n  }\n});","map":{"version":3,"names":["defineStore","supabase","state","tasks","actions","addTask","task","from","insert","data","error","push","editTask","taskId","update","name","match","console","log","currentTask","filter","id","title","fetchTasks","select","order","ascending","map"],"sources":["/Users/bogdia/IronHack/toDoApp/src/store/task.js"],"sourcesContent":["import { defineStore } from 'pinia';\nimport supabase from '../supabase/index';\n\nexport default defineStore('tasks', {\n  state: () => ({\n    tasks: [],\n  }),\n  actions: {\n    async addTask (task) {\n      const { data, error } = await supabase.from('tasks').insert(task);\n      if (error) throw error;\n      if (data) {\n        this.tasks.push(data);\n      }\n    },\n\n    async editTask(taskId) {\n       const { error, data } = await supabase.from('tasks').update({ name: ' '}).match({name: ' '});\n      if (error) throw error;\n      if (data) {\n        console.log(data);\n        const currentTask = this.tasks.filter((task) => task.id === taskId);\n        currentTask.title = data;\n      }\n    },\n\n    async fetchTasks() {\n      const { data: tasks } = await supabase\n        .from('tasks')\n        .select('*')\n        .order('id', { ascending: false });\n      // this.tasks = tasks;\n      this.tasks = tasks.map((task) => ({}))\n    },\n  },\n});\n"],"mappings":";;;;;;;AAAA,SAASA,WAAT,QAA4B,OAA5B;AACA,OAAOC,QAAP,MAAqB,mBAArB;AAEA,eAAeD,WAAW,CAAC,OAAD,EAAU;EAClCE,KAAK,EAAE;IAAA,OAAO;MACZC,KAAK,EAAE;IADK,CAAP;EAAA,CAD2B;EAIlCC,OAAO,EAAE;IACDC,OADC,mBACQC,IADR,EACc;MAAA;;MAAA;QAAA;;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACWL,QAAQ,CAACM,IAAT,CAAc,OAAd,EAAuBC,MAAvB,CAA8BF,IAA9B,CADX;;cAAA;gBAAA;gBACXG,IADW,yBACXA,IADW;gBACLC,KADK,yBACLA,KADK;;gBAAA,KAEfA,KAFe;kBAAA;kBAAA;gBAAA;;gBAAA,MAEFA,KAFE;;cAAA;gBAGnB,IAAID,IAAJ,EAAU;kBACR,KAAI,CAACN,KAAL,CAAWQ,IAAX,CAAgBF,IAAhB;gBACD;;cALkB;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAMpB,CAPM;IASDG,QATC,oBASQC,MATR,EASgB;MAAA;;MAAA;QAAA;;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACUZ,QAAQ,CAACM,IAAT,CAAc,OAAd,EAAuBO,MAAvB,CAA8B;kBAAEC,IAAI,EAAE;gBAAR,CAA9B,EAA4CC,KAA5C,CAAkD;kBAACD,IAAI,EAAE;gBAAP,CAAlD,CADV;;cAAA;gBAAA;gBACZL,KADY,0BACZA,KADY;gBACLD,IADK,0BACLA,IADK;;gBAAA,KAEjBC,KAFiB;kBAAA;kBAAA;gBAAA;;gBAAA,MAEJA,KAFI;;cAAA;gBAGrB,IAAID,IAAJ,EAAU;kBACRQ,OAAO,CAACC,GAAR,CAAYT,IAAZ;kBACMU,WAFE,GAEY,MAAI,CAAChB,KAAL,CAAWiB,MAAX,CAAkB,UAACd,IAAD;oBAAA,OAAUA,IAAI,CAACe,EAAL,KAAYR,MAAtB;kBAAA,CAAlB,CAFZ;kBAGRM,WAAW,CAACG,KAAZ,GAAoBb,IAApB;gBACD;;cAPoB;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAQtB,CAjBM;IAmBDc,UAnBC,wBAmBY;MAAA;;MAAA;QAAA;;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACatB,QAAQ,CACnCM,IAD2B,CACtB,OADsB,EAE3BiB,MAF2B,CAEpB,GAFoB,EAG3BC,KAH2B,CAGrB,IAHqB,EAGf;kBAAEC,SAAS,EAAE;gBAAb,CAHe,CADb;;cAAA;gBAAA;gBACHvB,KADG,0BACTM,IADS;gBAKjB;gBACA,MAAI,CAACN,KAAL,GAAaA,KAAK,CAACwB,GAAN,CAAU,UAACrB,IAAD;kBAAA,OAAW,EAAX;gBAAA,CAAV,CAAb;;cANiB;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAOlB;EA1BM;AAJyB,CAAV,CAA1B"},"metadata":{},"sourceType":"module"}