{"ast":null,"code":"import \"core-js/modules/es.array.slice.js\";\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withModifiers as _withModifiers, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, Fragment as _Fragment } from \"vue\";\nvar _hoisted_1 = {\n  key: 0\n};\n\nvar _hoisted_2 = /*#__PURE__*/_createTextVNode(\"Sign out\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_router_link = _resolveComponent(\"router-link\");\n\n  var _component_router_view = _resolveComponent(\"router-view\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_ctx.user !== null ? (_openBlock(), _createElementBlock(\"nav\", _hoisted_1, [_createElementVNode(\"p\", null, \"Signed in as \" + _toDisplayString(_ctx.user.email), 1\n  /* TEXT */\n  ), _createCommentVNode(\" <router-link to=\\\"/\\\">Home</router-link> | \"), _createVNode(_component_router_link, {\n    onClick: _withModifiers($options.handleSignOut, [\"prevent\"]),\n    to: \"/auth\",\n    id: \"signout\"\n  }, {\n    \"default\": _withCtx(function () {\n      return [_hoisted_2];\n    }),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"onClick\"])])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"h1\", null, _toDisplayString(_ctx.user.email.slice) + \"'s to do list\", 1\n  /* TEXT */\n  ), _createVNode(_component_router_view)], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":";;;;;;+CAI0E;;;;;;;6DAH7DA,cAAI,sBAAfC,oBAIM,KAJN,EAIMC,UAJN,EAIM,CAHJC,oBAAqC,GAArC,EAAqC,IAArC,EAAG,kBAAaC,iBAAGJ,UAAKK,KAAR,CAAhB,EAA6B;EAAA;EAA7B,CAGI,EAFLC,mEAEK,EADJC,aAA4FC,sBAA5F,EAA4F;IAA9EC,OAAK,iBAAYC,sBAAZ,EAAyB,WAAzB,CAAyE;IAA9CC,EAAE,EAAC,OAA2C;IAAnCC,EAAE,EAAC;EAAgC,CAA5F;wBAAsE;MAAA,OAAQ,YAAR;IAAA;;;;GAAtE;;EAAA,cACI,CAJN,wCAKIT,oBAA4C,IAA5C,EAA4C,IAA5C,EAA4CC,iBAArCJ,UAAKK,KAAL,CAAWQ,KAA0B,IAAlB,eAA1B,EAAuC;EAAA;EAAvC,GACJN,aAAcO,sBAAd","names":["_ctx","_createElementBlock","_hoisted_1","_createElementVNode","_toDisplayString","email","_createCommentVNode","_createVNode","_component_router_link","onClick","$options","to","id","slice","_component_router_view"],"sourceRoot":"","sources":["/Users/bogdia/IronHack/toDoApp/src/App.vue"],"sourcesContent":["<template>\n  <nav v-if=\"user !== null\">\n    <p>Signed in as {{ user.email }} </p>\n   <!-- <router-link to=\"/\">Home</router-link> | -->\n    <router-link @click.prevent = \"handleSignOut\" to=\"/auth\" id=\"signout\">Sign out</router-link>\n  </nav>\n      <h1>{{ user.email.slice }}'s to do list</h1>\n  <router-view/>\n</template>\n\n<script>\n\nimport userStore from '@/store/user';\nimport { mapActions, mapState } from 'pinia';\n\nexport default {\n  name: 'App',\n  computed: {\n    ...mapState(userStore, ['user']),\n  },\n  methods: {\n    ...mapActions(userStore, ['fetchUser', 'signOut']),\n    handleSignOut() {\n      this.signOut();\n      if (this.user === null) {\n        this.$router.push('/auth');\n      }\n    },\n  },\n  async created() {\n    try {\n      await this.fetchUser(); // here we call fetch user\n      if (!this.user) {\n      // redirect them to logout if the user is not there\n        this.$router.push({ path: '/auth' });\n      } else {\n      // continue to dashboard\n        this.$router.push({ path: '/' });\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  },\n};\n\n</script>\n"]},"metadata":{},"sourceType":"module"}